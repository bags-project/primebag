{% extends 'base.html.twig' %}

{% block title %}Panier{% endblock %}

{% block body %}

    <h1>Panier</h1>

    {# {{ dump(app.session.get('cart')) }} #}
    
    {% set cart = app.session.get('cart') %}
    {% set nbArticles = cart.name|length %}
    <hr />
    <p>Vous avez {{nbArticles}} articles dans votre panier :</p>
    <hr />
    {% set cart = app.session.get('cart') %}
    {% set nbArticles = cart.name|length %}


    <div class="container">
        {% for key in cart.name|keys %}
            {{dump(cart)}}
            <div class="row">
                <div class="col-6">
                    <h4>Article : {{ attribute(cart.name, key) }}</h4>
                </div>
                <div class="col-2">
                    <h4>Référence : {{ attribute(cart.ref, key) }}</h4>
                </div>
                <div class="col-2">                
                    <h4>Prix : {{ attribute(cart.price, key) }}</h4>
                </div>
                {% set id = attribute(cart.id, key)  %}
                {{dump(id)}}
                <div class="col-2">             
                    <a href="{{ path('cart_remove', {'id': id}) }}">xxxxxxxxxxxxx</a>
                </div>
            </div>
            <hr />
        {% else %}
            <p>Votre panier est vide.</p>
        {% endfor %}           
        <button type="submit" class="btn-block btn-success">Valider mon panier</button>
    </div>
{#  
    {% if pepito %}
        <button type="submit" class="btn btn-success">Valider mon panier</button>
    {% endif %}
#}

{% endblock %}
