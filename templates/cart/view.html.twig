{% extends 'base.html.twig' %}

{% block title %}Panier{% endblock %}

{% block body %}

    <h1>Panier</h1>

    {# {{ dump(app.session.get('cart')) }} #}
    
    {% set cart = app.session.get('cart') %}
    {% set nbArticles = cart.name|length %}
    <hr />
    <p>Vous avez {{nbArticles}} articles dans votre panier :</p>
    <hr />
    {% set cart = app.session.get('cart') %}
    {% set nbArticles = cart.name|length %}


    {# ///////// Entête /////////// #}
    <div class="container">
        <div class="row">
            <div class="col-md-8 d-none d-md-block titleListInCart">
                Article
            </div>
            <div class="col-md-2 d-none d-md-block titleListInCart">
                Référence
            </div>
            <div class="col-md-1 d-none d-md-block titleListInCart">                
                Prix
            </div>
            <div class="col-1 d-none d-md-block titleListInCart">             
                Supprimer
            </div>
        </div>
        <hr />
    </div>

    {# ///////// Liste /////////// #}
    <div class="container">
        {% for key in cart.name|keys %}
            <div class="row">
                <div class="col-md-2 col-sm-12 cartDetails">
                    {# <img src="../assets/img/poster/sac1_l.jpg" alt=""> #}
                    <img id="cartPosters" src="../assets/img/poster/{{attribute(cart.poster, key)}}" alt="Votre article">
                </div>            
                <div class="col-md-6 col-sm-12 cartDetails">
                    {{ attribute(cart.name, key) }}
                </div>
                <div class="col-md-2 col-sm-12 cartDetails">
                    {{ attribute(cart.ref, key) }} 
                </div>
                <div class="col-md-1 col-sm-12 cartDetails">                
                    {{ attribute(cart.price, key) }} €
                </div>
                {% set id = attribute(cart.id, key)  %}
                <div class="col-md-1  col-sm-12 cartDetails">             
                    <a href="{{ path('cart_remove', {'id': id}) }}">
                        <button id="btnRemFromCart" type="button" class="btn btn-danger">x</button>
                    </a>
                </div>
            </div>
            <hr />
        {% else %}
            <p>Votre panier est vide.</p>
        {% endfor %}           
        <button type="submit" class="btn-block btn-success">Valider mon panier</button>
    </div>

{% endblock %}
